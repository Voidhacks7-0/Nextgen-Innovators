<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SVVV | Resources</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --navy-dark: #0f2c4e; --accent-yellow: #fbbf24;
            --bg-body: #f8fafc; --bg-surface: #ffffff; --text-main: #1e293b; --text-muted: #64748b; --border: #e2e8f0; --sidebar-width: 260px;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg-body); color: var(--text-main); display: flex; min-height: 100vh; }
        
        /* Sidebar */
        .sidebar { width: var(--sidebar-width); background: var(--navy-dark); color: white; position: fixed; height: 100vh; display: flex; flex-direction: column; z-index: 100; }
        .logo-area { padding: 2rem; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .logo-text { font-size: 2rem; font-weight: 800; letter-spacing: -1px; color: #fff; }
        .logo-sub { font-size: 0.75rem; color: var(--accent-yellow); text-transform: uppercase; letter-spacing: 1px; font-weight: 600; }
        .nav-menu { padding: 2rem 1rem; flex: 1; list-style: none; }
        .nav-link { display: flex; align-items: center; padding: 1rem; color: rgba(255,255,255,0.7); text-decoration: none; border-radius: 8px; margin-bottom: 0.5rem; font-weight: 500; transition: 0.2s; }
        .nav-link:hover { color: #fff; background: rgba(255,255,255,0.05); }
        .nav-link.active { background: var(--accent-yellow); color: var(--navy-dark); font-weight: 700; box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3); }
        .nav-link i { width: 24px; margin-right: 12px; }

        .main { margin-left: 260px; flex: 1; padding: 2.5rem; }
        
        .header { margin-bottom: 3rem; text-align: center; }
        .header h1 { font-size: 2.5rem; font-weight: 800; color: var(--navy-dark); margin-bottom: 10px; }
        
        /* Domain Grid */
        .domains-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 4rem; }
        .domain-card { background: #fff; padding: 2.5rem 1.5rem; border-radius: 12px; text-align: center; border: 1px solid var(--border); transition: 0.3s; cursor: pointer; position: relative; }
        .domain-card:hover { border-color: var(--accent-yellow); box-shadow: 0 20px 40px rgba(0,0,0,0.05); transform: translateY(-5px); }
        .domain-card.active { border: 2px solid var(--navy-dark); background: #eff6ff; box-shadow: 0 10px 20px rgba(15, 44, 78, 0.1); }
        
        .icon-square { width: 80px; height: 80px; margin: 0 auto 1.5rem; border: 2px solid var(--navy-dark); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; color: var(--navy-dark); transition: 0.3s; }
        .domain-card:hover .icon-square, .domain-card.active .icon-square { background: var(--navy-dark); color: var(--accent-yellow); }
        .domain-title { font-weight: 700; font-size: 1.2rem; margin-bottom: 5px; color: var(--navy-dark); }
        
        /* Resource List */
        .res-list { background: #fff; border: 1px solid var(--border); border-radius: 12px; padding: 2rem; box-shadow: 0 4px 20px rgba(0,0,0,0.03); min-height: 400px; }
        .list-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 2px solid #f1f5f9; }
        
        .res-row { display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; border: 1px solid var(--border); border-radius: 8px; margin-bottom: 1rem; transition: 0.2s; animation: fadeIn 0.4s ease; }
        .res-row:hover { border-color: var(--navy-dark); background: #f8fafc; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .res-info h4 { margin-bottom: 5px; color: var(--navy-dark); font-size: 1.1rem; }
        .badge { padding: 6px 14px; border-radius: 50px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; }
        .badge.avail { background: #dcfce7; color: #15803d; }
        .badge.busy { background: #fee2e2; color: #b91c1c; }
        
        .btn-reserve { background: #fff; border: 2px solid var(--navy-dark); color: var(--navy-dark); padding: 8px 16px; border-radius: 6px; font-weight: 700; cursor: pointer; transition: 0.2s; }
        .btn-reserve:hover { background: var(--navy-dark); color: var(--accent-yellow); }
        .btn-reserve:disabled { opacity: 0.5; cursor: not-allowed; background: #e2e8f0; border-color: #cbd5e1; color: #64748b; }
        .btn-reserve:disabled:hover { background: #e2e8f0; color: #64748b; }

        /* Modal */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 44, 78, 0.6); backdrop-filter: blur(4px); display: none; align-items: center; justify-content: center; z-index: 1000; }
        .modal-content { background: white; padding: 2.5rem; border-radius: 16px; width: 100%; max-width: 450px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); text-align: center; animation: popIn 0.3s ease; }
        @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .modal-input { width: 100%; padding: 12px; margin: 10px 0; border: 2px solid var(--border); border-radius: 8px; outline: none; font-family: inherit; }
        .modal-input:focus { border-color: var(--navy-dark); }
        .modal-actions { margin-top: 20px; display: flex; gap: 10px; justify-content: center; }
        .btn-primary { background: var(--navy-dark); color: white; padding: 12px 24px; border-radius: 8px; border: none; font-weight: 700; cursor: pointer; }
        .btn-primary:hover { background: #1a3c61; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }

        /* Toast */
        .toast { position: fixed; bottom: 30px; right: 30px; background: var(--navy-dark); color: var(--accent-yellow); padding: 1rem 2rem; border-radius: 8px; font-weight: 600; transform: translateY(100px); transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 2000; box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        .toast.show { transform: translateY(0); }

        @media (max-width: 768px) { .sidebar { display: none; } .main { margin-left: 0; padding: 1rem; } }
    </style>
</head>
<body>
    <nav class="sidebar">
        <div class="logo-area"><div class="logo-text">SVVV</div><div class="logo-sub">Student Portal</div></div>
        <ul class="nav-menu">
            <li><a href="dashboard.html" class="nav-link"><i class="fas fa-th-large"></i> Dashboard</a></li>
            <li><a href="schedule.html" class="nav-link"><i class="far fa-calendar-alt"></i> Schedule</a></li>
            <li><a href="resources.html" class="nav-link active"><i class="fas fa-layer-group"></i> Resources</a></li>
            <li><a href="academics.html" class="nav-link"><i class="fas fa-graduation-cap"></i> Academics</a></li>
            <li><a href="collaboration.html" class="nav-link"><i class="fas fa-users"></i> Collaboration</a></li>
        </ul>
    </nav>
    <main class="main">
        <div class="header">
            <h1>Lab & Equipment</h1>
            <p>Select your department to view availability</p>
        </div>

        <div class="domains-grid">
            <div class="domain-card active" onclick="loadResources('cs', this)">
                <div class="icon-square"><i class="fas fa-laptop-code"></i></div>
                <h3 class="domain-title">Computer Science</h3>
                <p style="font-size: 0.9rem; color: var(--text-muted);">AI Labs & Servers</p>
            </div>
            <div class="domain-card" onclick="loadResources('electronics', this)">
                <div class="icon-square"><i class="fas fa-microchip"></i></div>
                <h3 class="domain-title">Electronics</h3>
                <p style="font-size: 0.9rem; color: var(--text-muted);">Circuit Labs & FPGA</p>
            </div>
            <div class="domain-card" onclick="loadResources('mechanical', this)">
                <div class="icon-square"><i class="fas fa-cogs"></i></div>
                <h3 class="domain-title">Mechanical</h3>
                <p style="font-size: 0.9rem; color: var(--text-muted);">CNC & 3D Printers</p>
            </div>
        </div>

        <div class="res-list">
            <div class="list-header">
                <h3 style="color: var(--navy-dark);" id="categoryTitle">Computer Science Resources</h3>
                <span class="badge avail" id="availCount">Loading...</span>
            </div>
            <div id="resourceContainer">
                </div>
        </div>
    </main>

    <div class="modal" id="resModal">
        <div class="modal-content">
            <h2 style="color: var(--navy-dark); margin-bottom: 10px;">Confirm Reservation</h2>
            <p style="color: var(--text-muted); margin-bottom: 20px;">Booking: <strong style="color:var(--navy-dark)" id="modalResName"></strong></p>
            <form onsubmit="confirmReservation(event)">
                <input type="text" class="modal-input" placeholder="Your Name" required>
                <input type="text" class="modal-input" placeholder="Purpose of Use" required>
                <div class="modal-actions">
                    <button type="button" class="btn-reserve" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Confirm</button>
                </div>
            </form>
        </div>
    </div>

    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i> Reservation Successful!
    </div>

    <script>
        // --- Data ---
        const database = {
            cs: [
                { id: 1, name: "NVIDIA Workstation A", desc: "Deep Learning Lab • 64GB RAM", status: "avail" },
                { id: 2, name: "Mac Studio (iOS)", desc: "Mobile App Lab • Xcode Environment", status: "busy" },
                { id: 3, name: "Server Cluster B", desc: "Network Lab • Ubuntu Linux", status: "avail" },
                { id: 4, name: "VR Headset Kit", desc: "AR/VR Lab • Oculus Quest 3", status: "avail" }
            ],
            electronics: [
                { id: 5, name: "Tektronix Oscilloscope", desc: "Digital Signal Lab • 100MHz", status: "avail" },
                { id: 6, name: "Arduino Kit Set 1", desc: "Microcontroller Lab • Complete Kit", status: "avail" },
                { id: 7, name: "Soldering Station 4", desc: "PCB Lab • Advanced Temperature Control", status: "busy" }
            ],
            mechanical: [
                { id: 8, name: "Prusa 3D Printer", desc: "Rapid Prototyping • PLA/ABS", status: "busy" },
                { id: 9, name: "CNC Milling Machine", desc: "Workshop B • 3-Axis", status: "avail" },
                { id: 10, name: "Laser Cutter", desc: "Fabrication Lab • 100W CO2", status: "avail" }
            ]
        };

        let currentDomain = 'cs';
        let bookingId = null;

        // --- Render Functions ---
        function loadResources(domain, cardElement) {
            currentDomain = domain;
            
            // Highlight Active Card
            if(cardElement) {
                document.querySelectorAll('.domain-card').forEach(c => c.classList.remove('active'));
                cardElement.classList.add('active');
            }

            const container = document.getElementById('resourceContainer');
            const data = database[domain];
            
            // Update Title and Count
            const titles = { cs: "Computer Science Resources", electronics: "Electronics Resources", mechanical: "Mechanical Resources" };
            document.getElementById('categoryTitle').innerText = titles[domain];
            
            const availableCount = data.filter(i => i.status === 'avail').length;
            document.getElementById('availCount').innerText = `${availableCount} Available`;

            // Render List
            container.innerHTML = data.map(item => `
                <div class="res-row">
                    <div class="res-info">
                        <h4>${item.name}</h4>
                        <p style="font-size: 0.85rem; color: var(--text-muted);">${item.desc}</p>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <span class="badge ${item.status === 'avail' ? 'avail' : 'busy'}">
                            ${item.status === 'avail' ? 'Available' : 'In Use'}
                        </span>
                        <button class="btn-reserve" 
                            ${item.status === 'busy' ? 'disabled' : ''} 
                            onclick="openModal(${item.id})">
                            ${item.status === 'avail' ? 'Reserve' : 'Locked'}
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // --- Modal Logic ---
        const modal = document.getElementById('resModal');

        function openModal(id) {
            bookingId = id;
            const item = database[currentDomain].find(i => i.id === id);
            document.getElementById('modalResName').innerText = item.name;
            modal.style.display = 'flex';
        }

        function closeModal() {
            modal.style.display = 'none';
            bookingId = null;
        }

        function confirmReservation(e) {
            e.preventDefault();
            
            // Update Data Status
            const item = database[currentDomain].find(i => i.id === bookingId);
            if(item) {
                item.status = 'busy';
                loadResources(currentDomain, null); // Re-render
                showToast(`Successfully booked ${item.name}`);
            }
            closeModal();
        }

        // --- Toast Logic ---
        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerHTML = `<i class="fas fa-check-circle"></i> ${msg}`;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }

        // Initialize
        loadResources('cs', null);

    </script>
</body>
</html>