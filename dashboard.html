<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SVVV | Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --navy-dark: #0f2c4e; --navy-light: #1e3a8a; --accent-yellow: #fbbf24;
            --bg-body: #f8fafc; --bg-surface: #ffffff; --text-main: #1e293b; --text-muted: #64748b;
            --border: #e2e8f0; --sidebar-width: 260px; --shadow: 0 4px 20px rgba(0,0,0,0.05);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg-body); color: var(--text-main); display: flex; min-height: 100vh; }

        /* Sidebar */
        .sidebar { width: var(--sidebar-width); background: var(--navy-dark); color: white; position: fixed; height: 100vh; display: flex; flex-direction: column; z-index: 100; transition: 0.3s; }
        .logo-area { padding: 2rem; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .logo-text { font-size: 2rem; font-weight: 800; letter-spacing: -1px; color: #fff; }
        .logo-sub { font-size: 0.75rem; color: var(--accent-yellow); text-transform: uppercase; letter-spacing: 1px; font-weight: 600; }
        .nav-menu { padding: 2rem 1rem; flex: 1; list-style: none; }
        .nav-link { display: flex; align-items: center; padding: 1rem; color: rgba(255,255,255,0.7); text-decoration: none; border-radius: 8px; margin-bottom: 0.5rem; font-weight: 500; transition: 0.2s; }
        .nav-link:hover { color: #fff; background: rgba(255,255,255,0.05); }
        .nav-link.active { background: var(--accent-yellow); color: var(--navy-dark); font-weight: 700; box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3); }
        .nav-link i { width: 24px; margin-right: 12px; font-size: 1.1rem; }

        /* Main Content */
        .main { margin-left: var(--sidebar-width); flex: 1; padding: 2.5rem; }
        
        .header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 3rem; }
        .header h1 { font-size: 2rem; font-weight: 800; color: var(--navy-dark); margin-bottom: 5px; }
        .header p { color: var(--text-muted); }
        .search-box { position: relative; }
        .search-box input { padding: 12px 20px 12px 40px; border-radius: 50px; border: 1px solid var(--border); width: 300px; outline: none; transition: 0.2s; }
        .search-box input:focus { border-color: var(--navy-dark); box-shadow: 0 0 0 3px rgba(15, 44, 78, 0.1); }
        .search-box i { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: var(--text-muted); }

        /* Stats Grid */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 3rem; }
        .stat-card { background: var(--bg-surface); padding: 2rem; border-radius: 12px; border: 1px solid var(--border); text-align: center; transition: 0.3s; position: relative; overflow: hidden; cursor: pointer; }
        .stat-card:hover { transform: translateY(-5px); border-color: var(--accent-yellow); box-shadow: var(--shadow); }
        .icon-box { width: 60px; height: 60px; border-radius: 12px; border: 2px solid var(--navy-dark); color: var(--navy-dark); font-size: 1.5rem; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; transition: 0.3s; }
        .stat-card:hover .icon-box { background: var(--navy-dark); color: var(--accent-yellow); }
        .stat-val { font-size: 1.5rem; font-weight: 800; color: var(--navy-dark); margin-bottom: 0.5rem; }

        /* Content Split */
        .content-split { display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; }
        .section-card { background: var(--bg-surface); border: 1px solid var(--border); border-radius: 12px; padding: 2rem; box-shadow: var(--shadow); transition: 0.3s; }
        .section-title { font-size: 1.25rem; font-weight: 700; color: var(--navy-dark); margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 2px solid #f1f5f9; display: flex; justify-content: space-between; align-items: center; }
        
        .event-item { display: flex; gap: 1.5rem; margin-bottom: 1.5rem; padding-bottom: 1.5rem; border-bottom: 1px solid #f8fafc; transition: 0.2s; cursor: pointer; }
        .event-item:last-child { border: none; margin: 0; padding: 0; }
        .event-item:hover { transform: translateX(5px); background: #f8fafc; padding: 10px; border-radius: 8px; }
        .event-date { min-width: 60px; text-align: center; font-weight: 800; color: var(--navy-dark); background: #f1f5f9; padding: 10px; border-radius: 8px; height: fit-content; }
        .event-date span { display: block; font-size: 0.8rem; color: var(--text-muted); font-weight: 600; text-transform: uppercase; }
        .event-info h4 { margin-bottom: 5px; color: var(--navy-dark); font-size: 1.1rem; }
        .event-info p { font-size: 0.9rem; color: var(--text-muted); line-height: 1.5; }

        /* Profile Mini */
        .profile-mini { text-align: center; }
        .avatar-circle { width: 100px; height: 100px; background: #e2e8f0; border-radius: 50%; margin: 0 auto 1.5rem; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: var(--navy-dark); border: 4px solid var(--accent-yellow); font-weight: 700; }
        .btn-outline { width: 100%; padding: 12px; border: 2px solid var(--navy-dark); background: transparent; color: var(--navy-dark); border-radius: 8px; font-weight: 700; cursor: pointer; transition: 0.2s; margin-top: 1.5rem; }
        .btn-outline:hover { background: var(--navy-dark); color: white; }
        .btn-solid { background: var(--navy-dark); color: white; border: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: 0.2s; }
        .btn-solid:hover { background: var(--navy-light); }

        /* Modals Generic */
        .modal-overlay { position: fixed; inset: 0; background: rgba(15, 44, 78, 0.6); backdrop-filter: blur(4px); z-index: 1000; display: none; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s; }
        .modal-overlay.show { opacity: 1; }
        .modal-box { background: white; padding: 2.5rem; border-radius: 16px; width: 100%; max-width: 500px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); transform: scale(0.9); transition: transform 0.3s; max-height: 90vh; overflow-y: auto; }
        .modal-overlay.show .modal-box { transform: scale(1); }
        .form-input { width: 100%; padding: 12px; margin: 10px 0; border: 2px solid var(--border); border-radius: 8px; font-family: inherit; outline: none; }
        .form-input:focus { border-color: var(--navy-dark); }
        
        /* Calendar Modal Specifics */
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; text-align: center; }
        .cal-day-name { font-weight: 700; color: var(--text-muted); font-size: 0.9rem; padding-bottom: 10px; }
        .cal-day { padding: 10px; border-radius: 8px; cursor: pointer; font-size: 0.9rem; transition: 0.2s; position: relative; }
        .cal-day:hover { background: #f1f5f9; }
        .cal-day.active { background: var(--navy-dark); color: white; }
        .cal-day.has-event::after { content: ''; position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); width: 5px; height: 5px; background: var(--accent-yellow); border-radius: 50%; }
        .selected-date-events { margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border); }

        /* Task Modal Specifics */
        .task-item { display: flex; align-items: center; gap: 10px; padding: 10px; border-bottom: 1px solid var(--border); }
        .task-item input[type="checkbox"] { width: 18px; height: 18px; accent-color: var(--navy-dark); }
        .task-item.completed span { text-decoration: line-through; color: var(--text-muted); }

        /* Toast */
        .toast { position: fixed; bottom: 30px; right: 30px; background: var(--navy-dark); color: var(--accent-yellow); padding: 1rem 2rem; border-radius: 8px; font-weight: 600; transform: translateY(100px); transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 2000; box-shadow: 0 10px 20px rgba(0,0,0,0.15); display: flex; align-items: center; gap: 10px; }
        .toast.active { transform: translateY(0); }

        @media (max-width: 1024px) { .content-split { grid-template-columns: 1fr; } }
        @media (max-width: 768px) { .sidebar { display: none; } .main { margin-left: 0; padding: 1.5rem; } .stats-grid { grid-template-columns: 1fr; } .header { flex-direction: column; align-items: flex-start; gap: 1rem; } .search-box input { width: 100%; } }
    </style>
</head>
<body>
    <nav class="sidebar">
        <div class="logo-area"><div class="logo-text">SVVV</div><div class="logo-sub">Student Portal</div></div>
        <ul class="nav-menu">
            <li><a href="dashboard.html" class="nav-link active"><i class="fas fa-th-large"></i> Dashboard</a></li>
            <li><a href="schedule.html" class="nav-link"><i class="far fa-calendar-alt"></i> Schedule</a></li>
            <li><a href="resources.html" class="nav-link"><i class="fas fa-layer-group"></i> Resources</a></li>
            <li><a href="academics.html" class="nav-link"><i class="fas fa-graduation-cap"></i> Academics</a></li>
            <li><a href="test.html" class="nav-link"><i class="fas fa-users"></i> Placement</a></li>
            <li><a href="collaboration.html" class="nav-link"><i class="fas fa-users"></i> Collaboration</a></li>
        </ul>
    </nav>

    <main class="main">
        <div class="header">
            <div>
                <h1 id="greeting">Dashboard</h1>
                <p id="subGreeting">Welcome back, Amitesh. Here is your daily overview.</p>
            </div>
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Search events, stats...">
            </div>
        </div>

        <div class="stats-grid" id="statsContainer">
            <div class="stat-card searchable" onclick="window.location.href='academics.html'" data-keywords="attendance profile">
                <div class="icon-box"><i class="fas fa-user-graduate"></i></div>
                <div class="stat-val">85%</div>
                <p style="font-size: 0.9rem; color: var(--text-muted);">Total Attendance</p>
            </div>
            
            <div class="stat-card searchable" onclick="openModal('gradesModal')" data-keywords="cgpa grades marks">
                <div class="icon-box"><i class="fas fa-chart-line"></i></div>
                <div class="stat-val">8.4</div>
                <p style="font-size: 0.9rem; color: var(--text-muted);">Current CGPA</p>
            </div>
            
            <div class="stat-card searchable" onclick="openModal('tasksModal')" data-keywords="assignments tasks pending">
                <div class="icon-box"><i class="fas fa-tasks"></i></div>
                <div class="stat-val">3</div>
                <p style="font-size: 0.9rem; color: var(--text-muted);">Pending Assignments</p>
            </div>
            
            <div class="stat-card searchable" onclick="window.location.href='academics.html'" data-keywords="courses subjects">
                <div class="icon-box"><i class="fas fa-book"></i></div>
                <div class="stat-val">5</div>
                <p style="font-size: 0.9rem; color: var(--text-muted);">Active Courses</p>
            </div>
        </div>

        <div class="content-split">
            <div class="section-card" id="eventsCard">
                <div class="section-title">
                    Upcoming Events 
                    <a href="#" style="font-size: 0.9rem; color: var(--navy-dark); text-decoration: none;" onclick="openModal('calendarModal')">View Calendar <i class="fas fa-arrow-right"></i></a>
                </div>
                
                <div class="event-item searchable" onclick="openEventDetails('Math Exam', 'Block A, Room 302', 'Bring your ID card and non-programmable calculator.')" data-keywords="math exam midterm">
                    <div class="event-date">29 <span>Nov</span></div>
                    <div class="event-info">
                        <h4>Mathematics Mid-Term Exam</h4>
                        <p><strong>Time:</strong> 10:00 AM - 1:00 PM <br> <strong>Venue:</strong> Block A, Room 302</p>
                    </div>
                </div>
                
                <div class="event-item searchable" onclick="openEventDetails('Tech Fest Reg', 'Auditorium', 'Team size: 4 members max.')" data-keywords="tech fest hackathon registration">
                    <div class="event-date">05 <span>Dec</span></div>
                    <div class="event-info">
                        <h4>Tech-Fest Registration Deadline</h4>
                        <p>Last day to register teams for the Hackathon. Visit the main auditorium desk.</p>
                    </div>
                </div>

                <div class="event-item searchable" onclick="openEventDetails('DBMS Project', 'Online Portal', 'Upload Zip file containing source code and report.')" data-keywords="project submission dbms">
                    <div class="event-date">10 <span>Dec</span></div>
                    <div class="event-info">
                        <h4>Project Submission: DBMS</h4>
                        <p>Submit final project documentation and source code via the Academics portal.</p>
                    </div>
                </div>
            </div>

            <div class="section-card profile-mini searchable" data-keywords="profile john doe">
                <div style="position: absolute; right: 20px; top: 20px;">
                    <button onclick="openModal('profileModal')" style="background:none; border:none; color:var(--text-muted); cursor:pointer;"><i class="fas fa-edit"></i></button>
                </div>
                <div class="avatar-circle" id="profileInitial">AP</div>
                <h3 style="color: var(--navy-dark); margin-bottom: 0.5rem; font-size: 1.5rem;" id="profileName">Amitesh Paliwal</h3>
                <p style="color: var(--text-muted); font-weight: 500;" id="profileMajor">B.Tech Computer Science</p>
                <p style="color: var(--text-muted); font-size: 0.9rem; margin-top: 5px;">Year 3 â€¢ Section B</p>
                
                <div style="margin-top: 1.5rem; display: flex; justify-content: space-between; padding: 1rem; background: #f8fafc; border-radius: 8px;">
                    <div><strong style="display:block; color:var(--navy-dark); font-size:1.2rem;">42</strong><span style="font-size:0.8rem;">Credits</span></div>
                    <div><strong style="display:block; color:var(--navy-dark); font-size:1.2rem;">12</strong><span style="font-size:0.8rem;">Projects</span></div>
                    <div><strong style="display:block; color:var(--navy-dark); font-size:1.2rem;">A+</strong><span style="font-size:0.8rem;">Grade</span></div>
                </div>

                <button class="btn-outline" onclick="openModal('gradesModal')">View Detailed Grades</button>
            </div>
        </div>
    </main>

    <div class="modal-overlay" id="profileModal">
        <div class="modal-box">
            <h2 style="color: var(--navy-dark); margin-bottom: 1.5rem;">Edit Profile</h2>
            <label style="display:block; font-weight:600; color:var(--navy-dark)">Full Name</label>
            <input type="text" id="editName" class="form-input" value="Amitesh Paliwal">
            
            <label style="display:block; font-weight:600; color:var(--navy-dark)">Major</label>
            <input type="text" id="editMajor" class="form-input" value="B.Tech Computer Science">
            
            <div style="text-align: right; margin-top: 1rem;">
                <button class="btn-solid" style="background:white; color:var(--navy-dark); border:2px solid var(--navy-dark)" onclick="closeModal('profileModal')">Cancel</button>
                <button class="btn-solid" onclick="saveProfile()">Save Changes</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="gradesModal">
        <div class="modal-box">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem;">
                <h2 style="color: var(--navy-dark);">Semester 5 Report</h2>
                <button onclick="closeModal('gradesModal')" style="background:none; border:none; font-size:1.5rem; cursor:pointer;">&times;</button>
            </div>
            <table style="width:100%; border-collapse:collapse;">
                <thead>
                    <tr style="background:#f1f5f9; text-align:left;"><th style="padding:10px;">Subject</th><th style="padding:10px;">Grade</th></tr>
                </thead>
                <tbody>
                    <tr><td style="padding:10px; border-bottom:1px solid #eee;">Data Structures</td><td style="padding:10px; border-bottom:1px solid #eee; color:#166534; font-weight:bold;">A+</td></tr>
                    <tr><td style="padding:10px; border-bottom:1px solid #eee;">Operating Sys</td><td style="padding:10px; border-bottom:1px solid #eee; color:#166534; font-weight:bold;">A</td></tr>
                    <tr><td style="padding:10px; border-bottom:1px solid #eee;">Database Mgmt</td><td style="padding:10px; border-bottom:1px solid #eee; color:#854d0e; font-weight:bold;">B+</td></tr>
                </tbody>
            </table>
            <div style="margin-top: 1.5rem; text-align: center;">
                <button class="btn-outline" onclick="showToast('Downloading Transcript...')"><i class="fas fa-download"></i> Download PDF</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="calendarModal">
        <div class="modal-box" style="max-width: 600px;">
            <div class="calendar-header">
                <h2 style="color: var(--navy-dark);">November 2025</h2>
                <button onclick="closeModal('calendarModal')" style="background:none; border:none; font-size:1.5rem; cursor:pointer;">&times;</button>
            </div>
            <div class="calendar-grid">
                <div class="cal-day-name">Sun</div><div class="cal-day-name">Mon</div><div class="cal-day-name">Tue</div><div class="cal-day-name">Wed</div><div class="cal-day-name">Thu</div><div class="cal-day-name">Fri</div><div class="cal-day-name">Sat</div>
                </div>
            <div class="selected-date-events" id="calendarEvents">
                <p style="color: var(--text-muted); font-style: italic;">Select a date to view events.</p>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="eventDetailModal">
        <div class="modal-box">
            <h2 id="evtTitle" style="color: var(--navy-dark); margin-bottom: 0.5rem;">Event Title</h2>
            <p id="evtLoc" style="color: var(--text-muted); font-weight: 600; margin-bottom: 1rem;">Location</p>
            <p id="evtDesc" style="color: var(--text-main); line-height: 1.6;">Description</p>
            <div style="text-align: right; margin-top: 1.5rem;">
                <button class="btn-solid" onclick="closeModal('eventDetailModal')">Close</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="tasksModal">
        <div class="modal-box">
            <h2 style="color: var(--navy-dark); margin-bottom: 1.5rem;">Pending Assignments</h2>
            <div class="task-item">
                <input type="checkbox" id="t1" onclick="toggleTask(this)">
                <span id="t1-txt">DBMS Project Report (Due Dec 10)</span>
            </div>
            <div class="task-item">
                <input type="checkbox" id="t2" onclick="toggleTask(this)">
                <span id="t2-txt">Maths Tutorial Sheet 5</span>
            </div>
            <div class="task-item">
                <input type="checkbox" id="t3" onclick="toggleTask(this)">
                <span id="t3-txt">OS Lab Record Submission</span>
            </div>
            <div style="text-align: right; margin-top: 1.5rem;">
                <button class="btn-solid" onclick="closeModal('tasksModal')">Done</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i> <span>Action Successful!</span>
    </div>

    <script>
        // --- 1. Dynamic Greeting ---
        function setGreeting() {
            const hour = new Date().getHours();
            let greeting = 'Good Morning';
            if (hour >= 12 && hour < 17) greeting = 'Good Afternoon';
            else if (hour >= 17) greeting = 'Good Evening';
            document.getElementById('greeting').innerText = greeting + ", Amitesh";
        }
        setGreeting();

        // --- 2. Modal System ---
        function openModal(id) {
            const modal = document.getElementById(id);
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('show'), 10);
            
            if(id === 'calendarModal') renderCalendar();
        }

        function closeModal(id) {
            const modal = document.getElementById(id);
            modal.classList.remove('show');
            setTimeout(() => modal.style.display = 'none', 300);
        }

        // --- 3. Event Detail Popup ---
        function openEventDetails(title, loc, desc) {
            document.getElementById('evtTitle').innerText = title;
            document.getElementById('evtLoc').innerText = loc;
            document.getElementById('evtDesc').innerText = desc;
            openModal('eventDetailModal');
        }

        // --- 4. Profile Actions ---
        function saveProfile() {
            const newName = document.getElementById('editName').value;
            const newMajor = document.getElementById('editMajor').value;
            if(newName && newMajor) {
                document.getElementById('profileName').innerText = newName;
                document.getElementById('profileMajor').innerText = newMajor;
                document.getElementById('profileInitial').innerText = newName.substring(0,2).toUpperCase();
                closeModal('profileModal');
                showToast('Profile updated successfully!');
            }
        }

        // --- 5. Calendar Logic ---
        function renderCalendar() {
            const grid = document.querySelector('.calendar-grid');
            // Retain headers
            grid.innerHTML = '<div class="cal-day-name">Sun</div><div class="cal-day-name">Mon</div><div class="cal-day-name">Tue</div><div class="cal-day-name">Wed</div><div class="cal-day-name">Thu</div><div class="cal-day-name">Fri</div><div class="cal-day-name">Sat</div>';
            
            // Dummy logic for Nov 2025 (Starts on Saturday)
            for(let i=0; i<6; i++) grid.innerHTML += '<div></div>'; // Empty slots
            
            for(let i=1; i<=30; i++) {
                let className = 'cal-day';
                // Mark existing events
                if(i === 29 || i === 5 || i === 10) className += ' has-event';
                
                const dayDiv = document.createElement('div');
                dayDiv.className = className;
                dayDiv.innerText = i;
                dayDiv.onclick = function() {
                    document.querySelectorAll('.cal-day').forEach(d => d.classList.remove('active'));
                    this.classList.add('active');
                    showCalendarEvents(i);
                };
                grid.appendChild(dayDiv);
            }
        }

        function showCalendarEvents(day) {
            const container = document.getElementById('calendarEvents');
            if(day === 29) {
                container.innerHTML = '<strong>Nov 29:</strong> Mathematics Mid-Term Exam (10:00 AM)';
            } else if (day === 5) {
                container.innerHTML = '<strong>Nov 5:</strong> Tech-Fest Registration';
            } else if (day === 10) {
                container.innerHTML = '<strong>Nov 10:</strong> DBMS Project Submission';
            } else {
                container.innerHTML = `<span style="color:var(--text-muted)">No events scheduled for Nov ${day}.</span>`;
            }
        }

        // --- 6. Task Logic ---
        function toggleTask(checkbox) {
            const textId = checkbox.id + '-txt';
            const text = document.getElementById(textId);
            if(checkbox.checked) {
                text.style.textDecoration = 'line-through';
                text.style.color = '#94a3b8';
            } else {
                text.style.textDecoration = 'none';
                text.style.color = '#1e293b';
            }
        }

        // --- 7. Search ---
        document.getElementById('searchInput').addEventListener('keyup', function(e) {
            const term = e.target.value.toLowerCase();
            const items = document.querySelectorAll('.searchable');
            items.forEach(item => {
                const keywords = item.getAttribute('data-keywords');
                if (keywords.includes(term) || item.innerText.toLowerCase().includes(term)) {
                    item.style.display = 'block';
                    if(item.classList.contains('event-item')) item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        });

        // --- 8. Toast System ---
        function showToast(msg) {
            const t = document.getElementById('toast');
            t.querySelector('span').innerText = msg;
            t.classList.add('active');
            setTimeout(() => t.classList.remove('active'), 3000);
        }
    </script>
</body>
</html>